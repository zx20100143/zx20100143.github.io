<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker æ­å»º Redis Cluster é›†ç¾¤ | Evan&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="webå‰ç«¯æŠ€æœ¯åšå®¢,ä¸“æ³¨webå‰ç«¯å­¦ä¹ ä¸æ€»ç»“ã€‚JavaScript,js,ES6,TypeScript,vue,React,python,css3,html5,Node,git,githubç­‰æŠ€æœ¯æ–‡ç« ã€‚">
    <meta name="keywords" content="å‰ç«¯åšå®¢,ä¸ªäººæŠ€æœ¯åšå®¢,å‰ç«¯,å‰ç«¯å¼€å‘,å‰ç«¯æ¡†æ¶,webå‰ç«¯,å‰ç«¯é¢è¯•é¢˜,æŠ€æœ¯æ–‡æ¡£,å­¦ä¹ ,é¢è¯•,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.6732922a.css" as="style"><link rel="preload" href="/assets/js/app.e647757e.js" as="script"><link rel="preload" href="/assets/js/2.37ecbe42.js" as="script"><link rel="preload" href="/assets/js/74.6d9cec5f.js" as="script"><link rel="prefetch" href="/assets/js/10.2694d36c.js"><link rel="prefetch" href="/assets/js/100.2923a6c1.js"><link rel="prefetch" href="/assets/js/101.33cc5c4a.js"><link rel="prefetch" href="/assets/js/102.635ca8f8.js"><link rel="prefetch" href="/assets/js/103.4808c170.js"><link rel="prefetch" href="/assets/js/104.2a04d5d2.js"><link rel="prefetch" href="/assets/js/105.dd336479.js"><link rel="prefetch" href="/assets/js/106.431bdbd1.js"><link rel="prefetch" href="/assets/js/107.bfb7f78f.js"><link rel="prefetch" href="/assets/js/108.59f0a0d6.js"><link rel="prefetch" href="/assets/js/109.1bf5c0bb.js"><link rel="prefetch" href="/assets/js/11.1fef61cd.js"><link rel="prefetch" href="/assets/js/110.cfe0a758.js"><link rel="prefetch" href="/assets/js/111.f180ff79.js"><link rel="prefetch" href="/assets/js/112.a5b6d492.js"><link rel="prefetch" href="/assets/js/113.7cc46396.js"><link rel="prefetch" href="/assets/js/114.0c3fb873.js"><link rel="prefetch" href="/assets/js/115.4f2cc537.js"><link rel="prefetch" href="/assets/js/116.eaceb24a.js"><link rel="prefetch" href="/assets/js/117.85b5e167.js"><link rel="prefetch" href="/assets/js/118.8af761ee.js"><link rel="prefetch" href="/assets/js/119.1025fe9b.js"><link rel="prefetch" href="/assets/js/12.3a27f131.js"><link rel="prefetch" href="/assets/js/120.1affad3e.js"><link rel="prefetch" href="/assets/js/121.f1700b48.js"><link rel="prefetch" href="/assets/js/122.2da1ff83.js"><link rel="prefetch" href="/assets/js/123.bbe8c9bb.js"><link rel="prefetch" href="/assets/js/124.bbd54a9b.js"><link rel="prefetch" href="/assets/js/125.96d2c734.js"><link rel="prefetch" href="/assets/js/126.f686900e.js"><link rel="prefetch" href="/assets/js/127.7d6705e4.js"><link rel="prefetch" href="/assets/js/128.38893737.js"><link rel="prefetch" href="/assets/js/129.02131e52.js"><link rel="prefetch" href="/assets/js/13.ef3c3ee5.js"><link rel="prefetch" href="/assets/js/130.25bf9ed9.js"><link rel="prefetch" href="/assets/js/131.09677d21.js"><link rel="prefetch" href="/assets/js/132.c865deaf.js"><link rel="prefetch" href="/assets/js/133.5a39dda1.js"><link rel="prefetch" href="/assets/js/134.fd563475.js"><link rel="prefetch" href="/assets/js/135.f384514b.js"><link rel="prefetch" href="/assets/js/136.885853d4.js"><link rel="prefetch" href="/assets/js/137.011b88d1.js"><link rel="prefetch" href="/assets/js/138.74cd8edc.js"><link rel="prefetch" href="/assets/js/139.3a754685.js"><link rel="prefetch" href="/assets/js/14.f7c55b4c.js"><link rel="prefetch" href="/assets/js/140.02b89f0d.js"><link rel="prefetch" href="/assets/js/141.bc1233f3.js"><link rel="prefetch" href="/assets/js/142.85455350.js"><link rel="prefetch" href="/assets/js/143.ec5074d8.js"><link rel="prefetch" href="/assets/js/144.dd655476.js"><link rel="prefetch" href="/assets/js/145.722c03c7.js"><link rel="prefetch" href="/assets/js/146.09c690f8.js"><link rel="prefetch" href="/assets/js/147.1081f9ee.js"><link rel="prefetch" href="/assets/js/148.4fefd78f.js"><link rel="prefetch" href="/assets/js/15.eb3073e0.js"><link rel="prefetch" href="/assets/js/16.a76f3aa1.js"><link rel="prefetch" href="/assets/js/17.21cffd14.js"><link rel="prefetch" href="/assets/js/18.412c079a.js"><link rel="prefetch" href="/assets/js/19.f7ec127c.js"><link rel="prefetch" href="/assets/js/20.44aab736.js"><link rel="prefetch" href="/assets/js/21.9030af68.js"><link rel="prefetch" href="/assets/js/22.fb5cb604.js"><link rel="prefetch" href="/assets/js/23.9a79f539.js"><link rel="prefetch" href="/assets/js/24.c4098bb2.js"><link rel="prefetch" href="/assets/js/25.26896566.js"><link rel="prefetch" href="/assets/js/26.b3b7b1f8.js"><link rel="prefetch" href="/assets/js/27.2f4919b8.js"><link rel="prefetch" href="/assets/js/28.41ce159e.js"><link rel="prefetch" href="/assets/js/29.857c5a00.js"><link rel="prefetch" href="/assets/js/3.a94bca7d.js"><link rel="prefetch" href="/assets/js/30.73ac0d38.js"><link rel="prefetch" href="/assets/js/31.e96f7fa9.js"><link rel="prefetch" href="/assets/js/32.b54e1d09.js"><link rel="prefetch" href="/assets/js/33.186e42f1.js"><link rel="prefetch" href="/assets/js/34.13f30968.js"><link rel="prefetch" href="/assets/js/35.1eaabd73.js"><link rel="prefetch" href="/assets/js/36.a932f2cd.js"><link rel="prefetch" href="/assets/js/37.b7c9eee0.js"><link rel="prefetch" href="/assets/js/38.f29e7739.js"><link rel="prefetch" href="/assets/js/39.6f8dd3dc.js"><link rel="prefetch" href="/assets/js/4.3c076cc1.js"><link rel="prefetch" href="/assets/js/40.df491902.js"><link rel="prefetch" href="/assets/js/41.1e537466.js"><link rel="prefetch" href="/assets/js/42.3d43de4e.js"><link rel="prefetch" href="/assets/js/43.7c72be71.js"><link rel="prefetch" href="/assets/js/44.e6fd7e4c.js"><link rel="prefetch" href="/assets/js/45.80270188.js"><link rel="prefetch" href="/assets/js/46.20881084.js"><link rel="prefetch" href="/assets/js/47.975d4d88.js"><link rel="prefetch" href="/assets/js/48.74b7de4e.js"><link rel="prefetch" href="/assets/js/49.badbc0fd.js"><link rel="prefetch" href="/assets/js/5.6945d169.js"><link rel="prefetch" href="/assets/js/50.4c105fff.js"><link rel="prefetch" href="/assets/js/51.25618f4f.js"><link rel="prefetch" href="/assets/js/52.9e809ef4.js"><link rel="prefetch" href="/assets/js/53.1234e3fe.js"><link rel="prefetch" href="/assets/js/54.4df09f85.js"><link rel="prefetch" href="/assets/js/55.0a8bce68.js"><link rel="prefetch" href="/assets/js/56.7b380acf.js"><link rel="prefetch" href="/assets/js/57.35338829.js"><link rel="prefetch" href="/assets/js/58.17833b6b.js"><link rel="prefetch" href="/assets/js/59.99e7433b.js"><link rel="prefetch" href="/assets/js/6.0dcf2416.js"><link rel="prefetch" href="/assets/js/60.c8e96f09.js"><link rel="prefetch" href="/assets/js/61.53e8e7f2.js"><link rel="prefetch" href="/assets/js/62.73be41ca.js"><link rel="prefetch" href="/assets/js/63.0a692a87.js"><link rel="prefetch" href="/assets/js/64.a2d6a4e4.js"><link rel="prefetch" href="/assets/js/65.18b1e958.js"><link rel="prefetch" href="/assets/js/66.b60688d0.js"><link rel="prefetch" href="/assets/js/67.e276ad2d.js"><link rel="prefetch" href="/assets/js/68.9e00518b.js"><link rel="prefetch" href="/assets/js/69.d03e9c5a.js"><link rel="prefetch" href="/assets/js/7.a75b65b8.js"><link rel="prefetch" href="/assets/js/70.0868de6e.js"><link rel="prefetch" href="/assets/js/71.6f7d9815.js"><link rel="prefetch" href="/assets/js/72.7ef8acba.js"><link rel="prefetch" href="/assets/js/73.35693a6f.js"><link rel="prefetch" href="/assets/js/75.ed497142.js"><link rel="prefetch" href="/assets/js/76.5957ba84.js"><link rel="prefetch" href="/assets/js/77.089f5015.js"><link rel="prefetch" href="/assets/js/78.b6e0f550.js"><link rel="prefetch" href="/assets/js/79.8ac0a277.js"><link rel="prefetch" href="/assets/js/8.f4f061ea.js"><link rel="prefetch" href="/assets/js/80.7f86761a.js"><link rel="prefetch" href="/assets/js/81.176c3bb1.js"><link rel="prefetch" href="/assets/js/82.df396fbf.js"><link rel="prefetch" href="/assets/js/83.b944a763.js"><link rel="prefetch" href="/assets/js/84.242a9994.js"><link rel="prefetch" href="/assets/js/85.73e23748.js"><link rel="prefetch" href="/assets/js/86.909e4f91.js"><link rel="prefetch" href="/assets/js/87.6fb1e0a8.js"><link rel="prefetch" href="/assets/js/88.db7ce45e.js"><link rel="prefetch" href="/assets/js/89.c14dd7ce.js"><link rel="prefetch" href="/assets/js/9.33677648.js"><link rel="prefetch" href="/assets/js/90.c7c54e72.js"><link rel="prefetch" href="/assets/js/91.2e73462f.js"><link rel="prefetch" href="/assets/js/92.965b6ed1.js"><link rel="prefetch" href="/assets/js/93.494f97bf.js"><link rel="prefetch" href="/assets/js/94.81bb164a.js"><link rel="prefetch" href="/assets/js/95.8e6bad82.js"><link rel="prefetch" href="/assets/js/96.ca19c3ce.js"><link rel="prefetch" href="/assets/js/97.1a66afdc.js"><link rel="prefetch" href="/assets/js/98.e9e54416.js"><link rel="prefetch" href="/assets/js/99.01a5f660.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6732922a.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Evan's blog" class="logo"> <span class="site-name can-hide">Evan's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/" class="nav-link">JavaåŸºç¡€</a></li><li class="dropdown-item"><h4>Javaé«˜çº§</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">Javaå¹¶å‘</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">Javaè™šæ‹Ÿæœº</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">JDKæ–°ç‰¹æ€§</a></li></ul></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">Java Web</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">æ•°æ®ç»“æ„ä¸ç®—æ³•</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">è®¡ç®—æœºç½‘ç»œ</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ¡†æ¶" class="dropdown-title"><!----> <span class="title" style="display:;">æ¡†æ¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Spring MVC</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Spring Boot</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Spring Cloud</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Spring Cloud Alibaba</a></li><li class="dropdown-item"><!----> <a href="/pages/c55839/" class="nav-link">Spring Security</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Mybatis</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Mybatis Plus</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Zookeeper</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Dubbo</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Apollo</a></li><li class="dropdown-item"><h4>å¤§æ•°æ®</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/261b24/" class="nav-link">Hbase</a></li><li class="dropdown-subitem"><a href="/pages/c55839/" class="nav-link">Spark</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">ClickHouse</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯" class="dropdown-title"><a href="/front-end/" class="link-title">å‰ç«¯</a> <span class="title" style="display:none;">å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Javascript</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">ES6</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Webpack</a></li><li class="dropdown-item"><h4>Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8309a5b876fc95e3/" class="nav-link">Vue Router</a></li><li class="dropdown-subitem"><a href="/pages/0a83b083bdf257cb/" class="nav-link">Vuex</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">ES6</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ¶æ„" class="dropdown-title"><a href="/design/" class="link-title">æ¶æ„</a> <span class="title" style="display:none;">æ¶æ„</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">è®¾è®¡æ¨¡å¼</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="è¿ç»´" class="dropdown-title"><a href="/operation/" class="link-title">è¿ç»´</a> <span class="title" style="display:none;">è¿ç»´</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Shellè„šæœ¬</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Kubernetes</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å·¥å…·" class="dropdown-title"><a href="/tools/" class="link-title">å·¥å…·</a> <span class="title" style="display:none;">å·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Maven</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">SVN</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Idea</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Windows</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="é¢è¯•" class="dropdown-title"><a href="/interview/" class="link-title">é¢è¯•</a> <span class="title" style="display:none;">é¢è¯•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">æ•°æ®ç»“æ„ä¸ç®—æ³•</a></li><li class="dropdown-item"><!----> <a href="/pages/bbda94/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">æ¡†æ¶</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">åˆ†å¸ƒå¼</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ›´å¤š" class="dropdown-title"><a href="/technology/" class="link-title">æ›´å¤š</a> <span class="title" style="display:none;">æ›´å¤š</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">æŠ€æœ¯æ–‡æ¡£</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHubæŠ€å·§</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">åšå®¢æ­å»º</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç´¢å¼•" class="dropdown-title"><a href="/archives/" class="link-title">ç´¢å¼•</a> <span class="title" style="display:none;">ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div> <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200103123203.jpg"> <div class="blogger-info"><h3>Evan Xu</h3> <span>å‰ç«¯ç•Œçš„å°å­¦ç”Ÿ</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/" class="nav-link">JavaåŸºç¡€</a></li><li class="dropdown-item"><h4>Javaé«˜çº§</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">Javaå¹¶å‘</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">Javaè™šæ‹Ÿæœº</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">JDKæ–°ç‰¹æ€§</a></li></ul></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">Java Web</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">æ•°æ®ç»“æ„ä¸ç®—æ³•</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">è®¡ç®—æœºç½‘ç»œ</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ¡†æ¶" class="dropdown-title"><!----> <span class="title" style="display:;">æ¡†æ¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Spring MVC</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Spring Boot</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Spring Cloud</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Spring Cloud Alibaba</a></li><li class="dropdown-item"><!----> <a href="/pages/c55839/" class="nav-link">Spring Security</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Mybatis</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Mybatis Plus</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Zookeeper</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Dubbo</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Apollo</a></li><li class="dropdown-item"><h4>å¤§æ•°æ®</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/261b24/" class="nav-link">Hbase</a></li><li class="dropdown-subitem"><a href="/pages/c55839/" class="nav-link">Spark</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">ClickHouse</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯" class="dropdown-title"><a href="/front-end/" class="link-title">å‰ç«¯</a> <span class="title" style="display:none;">å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Javascript</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">ES6</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Webpack</a></li><li class="dropdown-item"><h4>Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8309a5b876fc95e3/" class="nav-link">Vue Router</a></li><li class="dropdown-subitem"><a href="/pages/0a83b083bdf257cb/" class="nav-link">Vuex</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">ES6</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ¶æ„" class="dropdown-title"><a href="/design/" class="link-title">æ¶æ„</a> <span class="title" style="display:none;">æ¶æ„</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">è®¾è®¡æ¨¡å¼</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="è¿ç»´" class="dropdown-title"><a href="/operation/" class="link-title">è¿ç»´</a> <span class="title" style="display:none;">è¿ç»´</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Shellè„šæœ¬</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Kubernetes</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å·¥å…·" class="dropdown-title"><a href="/tools/" class="link-title">å·¥å…·</a> <span class="title" style="display:none;">å·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Maven</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">SVN</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Idea</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">Windows</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="é¢è¯•" class="dropdown-title"><a href="/interview/" class="link-title">é¢è¯•</a> <span class="title" style="display:none;">é¢è¯•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">æ•°æ®ç»“æ„ä¸ç®—æ³•</a></li><li class="dropdown-item"><!----> <a href="/pages/bbda94/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">æ¡†æ¶</a></li><li class="dropdown-item"><!----> <a href="/back-end/" class="nav-link">åˆ†å¸ƒå¼</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ›´å¤š" class="dropdown-title"><a href="/technology/" class="link-title">æ›´å¤š</a> <span class="title" style="display:none;">æ›´å¤š</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">æŠ€æœ¯æ–‡æ¡£</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHubæŠ€å·§</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">åšå®¢æ­å»º</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç´¢å¼•" class="dropdown-title"><a href="/archives/" class="link-title">ç´¢å¼•</a> <span class="title" style="display:none;">ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div> <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Shellè„šæœ¬</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tomcat</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nginx</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Docker</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/261b24/" class="sidebar-link">Docker åˆçº§ç¯‡</a></li><li><a href="/pages/5ca863/" class="sidebar-link">Docker ä¸­çº§ç¯‡</a></li><li><a href="/pages/a24e91/" class="sidebar-link">Docker é«˜çº§å®è·µç¯‡</a></li><li><a href="/pages/8a7664/" class="sidebar-link">Docker ç½‘ç»œæ¨¡å¼å’Œå®¹å™¨é—´é€šä¿¡</a></li><li><a href="/pages/457953/" aria-current="page" class="active sidebar-link">Docker æ­å»º Redis Cluster é›†ç¾¤</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/457953/#ç¯å¢ƒ" class="sidebar-link">ç¯å¢ƒ</a></li><li class="sidebar-sub-header"><a href="/pages/457953/#æ­å»º" class="sidebar-link">æ­å»º</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/457953/#ç¼–å†™-redis-é…ç½®æ–‡ä»¶" class="sidebar-link">ç¼–å†™ Redis é…ç½®æ–‡ä»¶</a></li><li class="sidebar-sub-header"><a href="/pages/457953/#åˆ›å»º-redis-å®¹å™¨" class="sidebar-link">åˆ›å»º Redis å®¹å™¨</a></li><li class="sidebar-sub-header"><a href="/pages/457953/#åˆ›å»º-redis-cluster-é›†ç¾¤" class="sidebar-link">åˆ›å»º Redis Cluster é›†ç¾¤</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/457953/#æŸ¥çœ‹é›†ç¾¤çŠ¶æ€" class="sidebar-link">æŸ¥çœ‹é›†ç¾¤çŠ¶æ€</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/457953/#æ£€æŸ¥é›†ç¾¤çŠ¶æ€" class="sidebar-link">æ£€æŸ¥é›†ç¾¤çŠ¶æ€</a></li><li class="sidebar-sub-header"><a href="/pages/457953/#æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯å’ŒèŠ‚ç‚¹ä¿¡æ¯" class="sidebar-link">æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯å’ŒèŠ‚ç‚¹ä¿¡æ¯</a></li><li class="sidebar-sub-header"><a href="/pages/457953/#set-get" class="sidebar-link">SET/GET</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/457953/#å®¢æˆ·ç«¯è¿æ¥" class="sidebar-link">å®¢æˆ·ç«¯è¿æ¥</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>kubernetes</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-0c557b5e><div class="articleInfo" data-v-0c557b5e><ul class="breadcrumbs" data-v-0c557b5e><li data-v-0c557b5e><a href="/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-0c557b5e></a></li> <li data-v-0c557b5e><a href="/categories/?category=%E8%BF%90%E7%BB%B4" title="åˆ†ç±»" data-v-0c557b5e>è¿ç»´</a></li><li data-v-0c557b5e><a href="/categories/?category=Docker" title="åˆ†ç±»" data-v-0c557b5e>Docker</a></li></ul> <div class="info" data-v-0c557b5e><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-0c557b5e><a href="https://github.com/xugaoyi" target="_blank" title="ä½œè€…" class="beLink" data-v-0c557b5e>xugaoyi</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-0c557b5e><a href="javascript:;" data-v-0c557b5e>2022-02-03</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Docker æ­å»º Redis Cluster é›†ç¾¤<!----></h1>  <div class="theme-vdoing-content content__default"><p>ä½¿ç”¨ Docker æ­å»º Redis Clusterï¼Œæœ€é‡è¦çš„ç¯èŠ‚å°±æ˜¯å®¹å™¨é€šä¿¡çš„é—®é¢˜ï¼Œè¿™ä¸€å—æˆ‘ä»¬åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­å·²ç»ç»™å¤§å®¶è§£å†³äº†ã€Š<a href="https://xie.infoq.cn/article/97355a6e7ac01bce8532d5ff5" target="_blank" rel="noopener noreferrer">Docker ç½‘ç»œæ¨¡å¼è¯¦è§£åŠå®¹å™¨é—´ç½‘ç»œé€šä¿¡<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‹ï¼Œæœ¬ç¯‡æ–‡ç« ä¸»è¦ç»ƒä¹ ä½¿ç”¨å¤šä¸ªå®¹å™¨å®Œæˆ Redis Cluster é›†ç¾¤ç¯å¢ƒçš„æ­å»ºï¼Œé¡ºä¾¿ä¸ºå­¦ä¹  Docker Compose é“ºé“ºè·¯ã€‚ä¿—è¯è¯´æ²¡æœ‰å¯¹æ¯”å°±æ²¡æœ‰ä¼¤å®³ï¼Œé€šè¿‡å¯¹æ¯”æ‰èƒ½æ„Ÿå—åˆ° Docker Compose çš„å¥½å¤„ ğŸ˜„ã€‚</p> <p>å…³äº Redis Cluster é›†ç¾¤æ›´å¤šçš„å†…å®¹è¯·é˜…è¯»ã€Š<a href="https://xie.infoq.cn/article/fe070dcadf891d3d641132c36" target="_blank" rel="noopener noreferrer">æœ€é€šä¿—æ˜“æ‡‚çš„ Redis æ¶æ„æ¨¡å¼è¯¦è§£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‹ã€‚</p> <p>æŒ‰ç…§ Redis å®˜ç½‘ï¼šhttps://redis.io/topics/cluster-tutorial çš„æç¤ºï¼Œä¸ºäº†ä½¿ Docker ä¸ Redis Cluster å…¼å®¹ï¼Œæ‚¨éœ€è¦ä½¿ç”¨ Docker çš„ <code>host</code> ç½‘ç»œæ¨¡å¼ã€‚</p> <p><code>host</code> ç½‘ç»œæ¨¡å¼éœ€è¦åœ¨åˆ›å»ºå®¹å™¨æ—¶é€šè¿‡å‚æ•° <code>--net host</code> æˆ–è€… <code>--network host</code> æŒ‡å®šï¼Œ<code>host</code> ç½‘ç»œæ¨¡å¼å¯ä»¥è®©<strong>å®¹å™¨å…±äº«å®¿ä¸»æœºç½‘ç»œæ ˆ</strong>ï¼Œå®¹å™¨å°†ä¸ä¼šè™šæ‹Ÿå‡ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„ IP ç­‰ï¼Œè€Œæ˜¯ä½¿ç”¨å®¿ä¸»æœºçš„ IP å’Œç«¯å£ã€‚</p> <p><img src="https://static001.geekbang.org/infoq/85/853745170f0475425dc6b2743c9963c4.png" alt="img"></p> <h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="header-anchor">#</a> ç¯å¢ƒ</h2> <p>ä¸ºäº†è®©ç¯å¢ƒæ›´åŠ çœŸå®ï¼Œæœ¬æ–‡ä½¿ç”¨<strong>å¤šæœº</strong>ç¯å¢ƒï¼š</p> <ul><li><p><code>192.168.10.10</code></p></li> <li><p><code>192.168.10.11</code></p></li></ul> <p>æ¯å°æœºå™¨æ‰€ä½¿ç”¨çš„åŸºç¡€è®¾æ–½ç¯å¢ƒå¦‚ä¸‹ï¼š</p> <ul><li><p><code>CentOS 7.8.2003</code></p></li> <li><p><code>Docker version 19.03.12</code></p></li></ul> <p><img src="https://static001.geekbang.org/infoq/03/0309ecfc01393c56c1e87247cc673c77.png" alt="img"></p> <h2 id="æ­å»º"><a href="#æ­å»º" class="header-anchor">#</a> æ­å»º</h2> <p>æ•´ä½“æ­å»ºæ­¥éª¤ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š</p> <ul><li><p>ä¸‹è½½ Redis é•œåƒï¼ˆå…¶å®è¿™æ­¥å¯ä»¥çœç•¥ï¼Œå› ä¸ºåˆ›å»ºå®¹å™¨æ—¶ï¼Œå¦‚æœæœ¬åœ°é•œåƒä¸å­˜åœ¨ï¼Œå°±ä¼šå»è¿œç¨‹æ‹‰å–ï¼‰ï¼›</p></li> <li><p>ç¼–å†™ Redis é…ç½®æ–‡ä»¶ï¼›</p></li> <li><p>åˆ›å»º Redis å®¹å™¨ï¼›</p></li> <li><p>åˆ›å»º Redis Cluster é›†ç¾¤ã€‚</p></li></ul> <h3 id="ç¼–å†™-redis-é…ç½®æ–‡ä»¶"><a href="#ç¼–å†™-redis-é…ç½®æ–‡ä»¶" class="header-anchor">#</a> ç¼–å†™ Redis é…ç½®æ–‡ä»¶</h3> <h4 id="åˆ›å»ºç›®å½•åŠæ–‡ä»¶"><a href="#åˆ›å»ºç›®å½•åŠæ–‡ä»¶" class="header-anchor">#</a> åˆ›å»ºç›®å½•åŠæ–‡ä»¶</h4> <p>åˆ†åˆ«åœ¨ <code>192.168.10.10</code> å’Œ <code>192.168.10.11</code> ä¸¤å°æœºå™¨ä¸Šæ‰§è¡Œä»¥ä¸‹æ“ä½œã€‚</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># åˆ›å»ºç›®å½•</span>
<span class="token function">mkdir</span> -p /usr/local/docker-redis/redis-cluster
<span class="token comment"># åˆ‡æ¢è‡³æŒ‡å®šç›®å½•</span>
<span class="token builtin class-name">cd</span> /usr/local/docker-redis/redis-cluster/
<span class="token comment"># ç¼–å†™ redis-cluster.tmpl æ–‡ä»¶</span>
<span class="token function">vi</span> redis-cluster.tmpl
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="ç¼–å†™é…ç½®æ–‡ä»¶"><a href="#ç¼–å†™é…ç½®æ–‡ä»¶" class="header-anchor">#</a> ç¼–å†™é…ç½®æ–‡ä»¶</h4> <p><code>192.168.10.10</code> æœºå™¨çš„ <code>redis-cluster.tmpl</code> æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>port <span class="token variable">${PORT}</span>
requirepass <span class="token number">1234</span>
masterauth <span class="token number">1234</span>
protected-mode no
daemonize no
appendonly <span class="token function">yes</span>
cluster-enabled <span class="token function">yes</span>
cluster-config-file nodes.conf
cluster-node-timeout <span class="token number">15000</span>
cluster-announce-ip <span class="token number">192.168</span>.10.10
cluster-announce-port <span class="token variable">${PORT}</span>
cluster-announce-bus-port <span class="token number">1</span><span class="token variable">${PORT}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>192.168.10.11</code> æœºå™¨çš„ <code>redis-cluster.tmpl</code> æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>port <span class="token variable">${PORT}</span>
requirepass <span class="token number">1234</span>
masterauth <span class="token number">1234</span>
protected-mode no
daemonize no
appendonly <span class="token function">yes</span>
cluster-enabled <span class="token function">yes</span>
cluster-config-file nodes.conf
cluster-node-timeout <span class="token number">15000</span>
cluster-announce-ip <span class="token number">192.168</span>.10.10
cluster-announce-port <span class="token variable">${PORT}</span>
cluster-announce-bus-port <span class="token number">1</span><span class="token variable">${PORT}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li><p><code>port</code>ï¼šèŠ‚ç‚¹ç«¯å£ï¼›</p></li> <li><p><code>requirepass</code>ï¼šæ·»åŠ è®¿é—®è®¤è¯ï¼›</p></li> <li><p><code>masterauth</code>ï¼šå¦‚æœä¸»èŠ‚ç‚¹å¼€å¯äº†è®¿é—®è®¤è¯ï¼Œä»èŠ‚ç‚¹è®¿é—®ä¸»èŠ‚ç‚¹éœ€è¦è®¤è¯ï¼›</p></li> <li><p><code>protected-mode</code>ï¼šä¿æŠ¤æ¨¡å¼ï¼Œé»˜è®¤å€¼ yesï¼Œå³å¼€å¯ã€‚å¼€å¯ä¿æŠ¤æ¨¡å¼ä»¥åï¼Œéœ€é…ç½® <code>bind ip</code> æˆ–è€…è®¾ç½®è®¿é—®å¯†ç ï¼›å…³é—­ä¿æŠ¤æ¨¡å¼ï¼Œå¤–éƒ¨ç½‘ç»œå¯ä»¥ç›´æ¥è®¿é—®ï¼›</p></li> <li><p><code>daemonize</code>ï¼šæ˜¯å¦ä»¥å®ˆæŠ¤çº¿ç¨‹çš„æ–¹å¼å¯åŠ¨ï¼ˆåå°å¯åŠ¨ï¼‰ï¼Œé»˜è®¤ noï¼›</p></li> <li><p><code>appendonly</code>ï¼šæ˜¯å¦å¼€å¯ AOF æŒä¹…åŒ–æ¨¡å¼ï¼Œé»˜è®¤ noï¼›</p></li> <li><p><code>cluster-enabled</code>ï¼šæ˜¯å¦å¼€å¯é›†ç¾¤æ¨¡å¼ï¼Œé»˜è®¤ noï¼›</p></li> <li><p><code>cluster-config-file</code>ï¼šé›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯æ–‡ä»¶ï¼›</p></li> <li><p><code>cluster-node-timeout</code>ï¼šé›†ç¾¤èŠ‚ç‚¹è¿æ¥è¶…æ—¶æ—¶é—´ï¼›</p></li> <li><p><code>cluster-announce-ip</code>ï¼šé›†ç¾¤èŠ‚ç‚¹ IPï¼Œå¡«å†™å®¿ä¸»æœºçš„ IPï¼›</p></li> <li><p><code>cluster-announce-port</code>ï¼šé›†ç¾¤èŠ‚ç‚¹æ˜ å°„ç«¯å£ï¼›</p></li> <li><p><code>cluster-announce-bus-port</code>ï¼šé›†ç¾¤èŠ‚ç‚¹æ€»çº¿ç«¯å£ã€‚</p></li></ul> <blockquote><p>æ¯ä¸ª Redis é›†ç¾¤èŠ‚ç‚¹éƒ½éœ€è¦æ‰“å¼€<strong>ä¸¤ä¸ª TCP è¿æ¥</strong>ã€‚ä¸€ä¸ªç”¨äºä¸ºå®¢æˆ·ç«¯æä¾›æœåŠ¡çš„æ­£å¸¸ Redis TCP ç«¯å£ï¼Œä¾‹å¦‚ 6379ã€‚è¿˜æœ‰ä¸€ä¸ªåŸºäº 6379 ç«¯å£åŠ  10000 çš„ç«¯å£ï¼Œæ¯”å¦‚ 16379ã€‚</p></blockquote> <blockquote><p>ç¬¬äºŒä¸ªç«¯å£ç”¨äºé›†ç¾¤æ€»çº¿ï¼Œè¿™æ˜¯ä¸€ä¸ªä½¿ç”¨äºŒè¿›åˆ¶åè®®çš„èŠ‚ç‚¹åˆ°èŠ‚ç‚¹é€šä¿¡é€šé“ã€‚èŠ‚ç‚¹ä½¿ç”¨é›†ç¾¤æ€»çº¿è¿›è¡Œæ•…éšœæ£€æµ‹ã€é…ç½®æ›´æ–°ã€æ•…éšœè½¬ç§»æˆæƒç­‰ç­‰ã€‚å®¢æˆ·ç«¯æ°¸è¿œä¸è¦å°è¯•ä¸é›†ç¾¤æ€»çº¿ç«¯å£é€šä¿¡ï¼Œä¸æ­£å¸¸çš„ Redis å‘½ä»¤ç«¯å£é€šä¿¡å³å¯ï¼Œä½†æ˜¯è¯·ç¡®ä¿é˜²ç«å¢™ä¸­çš„è¿™ä¸¤ä¸ªç«¯å£éƒ½å·²ç»æ‰“å¼€ï¼Œå¦åˆ™ Redis é›†ç¾¤èŠ‚ç‚¹å°†æ— æ³•é€šä¿¡ã€‚</p></blockquote> <p>åœ¨ <code>192.168.10.10</code> æœºå™¨çš„ <code>redis-cluster</code> ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token for-or-select variable">port</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">`</span><span class="token function">seq</span> <span class="token number">6371</span> <span class="token number">6373</span><span class="token variable">`</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token punctuation">\</span>
  <span class="token function">mkdir</span> -p <span class="token variable">${port}</span>/conf <span class="token punctuation">\</span>
  <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">PORT</span><span class="token operator">=</span><span class="token variable">${port}</span> envsubst <span class="token operator">&lt;</span> redis-cluster.tmpl <span class="token operator">&gt;</span> <span class="token variable">${port}</span>/conf/redis.conf <span class="token punctuation">\</span>
  <span class="token operator">&amp;&amp;</span> <span class="token function">mkdir</span> -p <span class="token variable">${port}</span>/data<span class="token punctuation">;</span><span class="token punctuation">\</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>åœ¨ <code>192.168.10.11</code> æœºå™¨çš„ <code>redis-cluster</code> ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token for-or-select variable">port</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">`</span><span class="token function">seq</span> <span class="token number">6374</span> <span class="token number">6376</span><span class="token variable">`</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token punctuation">\</span>
  <span class="token function">mkdir</span> -p <span class="token variable">${port}</span>/conf <span class="token punctuation">\</span>
  <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">PORT</span><span class="token operator">=</span><span class="token variable">${port}</span> envsubst <span class="token operator">&lt;</span> redis-cluster.tmpl <span class="token operator">&gt;</span> <span class="token variable">${port}</span>/conf/redis.conf <span class="token punctuation">\</span>
  <span class="token operator">&amp;&amp;</span> <span class="token function">mkdir</span> -p <span class="token variable">${port}</span>/data<span class="token punctuation">;</span><span class="token punctuation">\</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ä¸Šé¢ä¸¤æ®µ shell for è¯­å¥ï¼Œæ„æ€å°±æ˜¯å¾ªç¯åˆ›å»º 6371 ~ 6376 ç›¸å…³çš„ç›®å½•åŠæ–‡ä»¶ã€‚</p> <p>åœ¨ <code>192.168.10.10</code> æœºå™¨æ‰§è¡ŒæŸ¥çœ‹å‘½ä»¤ç»“æœå¦‚ä¸‹ï¼Œå¦‚æœæ²¡æœ‰ <code>tree</code> å‘½ä»¤å…ˆå®‰è£… <code>yum install -y tree</code>ã€‚</p> <p><img src="https://static001.geekbang.org/infoq/de/deef87b922ecb7bef310c9935b2d50c9.png" alt="img"></p> <p>åœ¨ <code>192.168.10.11</code> æœºå™¨æ‰§è¡ŒæŸ¥çœ‹å‘½ä»¤ç»“æœå¦‚ä¸‹ã€‚</p> <p><img src="https://static001.geekbang.org/infoq/32/3270fddfb150fa9d1c8ff6e46025a822.png" alt="img"></p> <p>ä»¥ä¸‹å†…å®¹ä¸ºæ¯ä¸ªèŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶è¯¦ç»†ä¿¡æ¯ã€‚</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span> <span class="token number">192.168</span>.10.10 <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
<span class="token punctuation">[</span>root@localhost redis-cluster<span class="token punctuation">]</span><span class="token comment"># cat /usr/local/docker-redis/redis-cluster/637{1..3}/conf/redis.conf</span>
port <span class="token number">6371</span>
requirepass <span class="token number">1234</span>
masterauth <span class="token number">1234</span>
protected-mode no
daemonize no
appendonly <span class="token function">yes</span>
cluster-enabled <span class="token function">yes</span>
cluster-config-file nodes.conf
cluster-node-timeout <span class="token number">15000</span>
cluster-announce-ip <span class="token number">192.168</span>.10.10
cluster-announce-port <span class="token number">6371</span>
cluster-announce-bus-port <span class="token number">16371</span>

port <span class="token number">6372</span>
requirepass <span class="token number">1234</span>
masterauth <span class="token number">1234</span>
protected-mode no
daemonize no
appendonly <span class="token function">yes</span>
cluster-enabled <span class="token function">yes</span>
cluster-config-file nodes.conf
cluster-node-timeout <span class="token number">15000</span>
cluster-announce-ip <span class="token number">192.168</span>.10.10
cluster-announce-port <span class="token number">6372</span>
cluster-announce-bus-port <span class="token number">16372</span>

port <span class="token number">6373</span>
requirepass <span class="token number">1234</span>
masterauth <span class="token number">1234</span>
protected-mode no
daemonize no
appendonly <span class="token function">yes</span>
cluster-enabled <span class="token function">yes</span>
cluster-config-file nodes.conf
cluster-node-timeout <span class="token number">15000</span>
cluster-announce-ip <span class="token number">192.168</span>.10.10
cluster-announce-port <span class="token number">6373</span>
cluster-announce-bus-port <span class="token number">16373</span>
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span> <span class="token number">192.168</span>.10.10 <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>

<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span> <span class="token number">192.168</span>.10.11 <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
<span class="token punctuation">[</span>root@localhost redis-cluster<span class="token punctuation">]</span><span class="token comment"># cat /usr/local/docker-redis/redis-cluster/637{4..6}/conf/redis.conf</span>
port <span class="token number">6374</span>
requirepass <span class="token number">1234</span>
masterauth <span class="token number">1234</span>
protected-mode no
daemonize no
appendonly <span class="token function">yes</span>
cluster-enabled <span class="token function">yes</span>
cluster-config-file nodes.conf
cluster-node-timeout <span class="token number">15000</span>
cluster-announce-ip <span class="token number">192.168</span>.10.11
cluster-announce-port <span class="token number">6374</span>
cluster-announce-bus-port <span class="token number">16374</span>

port <span class="token number">6375</span>
requirepass <span class="token number">1234</span>
masterauth <span class="token number">1234</span>
protected-mode no
daemonize no
appendonly <span class="token function">yes</span>
cluster-enabled <span class="token function">yes</span>
cluster-config-file nodes.conf
cluster-node-timeout <span class="token number">15000</span>
cluster-announce-ip <span class="token number">192.168</span>.10.11
cluster-announce-port <span class="token number">6375</span>
cluster-announce-bus-port <span class="token number">16375</span>

port <span class="token number">6376</span>
requirepass <span class="token number">1234</span>
masterauth <span class="token number">1234</span>
protected-mode no
daemonize no
appendonly <span class="token function">yes</span>
cluster-enabled <span class="token function">yes</span>
cluster-config-file nodes.conf
cluster-node-timeout <span class="token number">15000</span>
cluster-announce-ip <span class="token number">192.168</span>.10.11
cluster-announce-port <span class="token number">6376</span>
cluster-announce-bus-port <span class="token number">16376</span>
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span> <span class="token number">192.168</span>.10.11 <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br></div></div><h3 id="åˆ›å»º-redis-å®¹å™¨"><a href="#åˆ›å»º-redis-å®¹å™¨" class="header-anchor">#</a> åˆ›å»º Redis å®¹å™¨</h3> <h4 id="åˆ›å»ºå®¹å™¨"><a href="#åˆ›å»ºå®¹å™¨" class="header-anchor">#</a> åˆ›å»ºå®¹å™¨</h4> <p>å°†å®¿ä¸»æœºçš„ <code>6371 ~ 6376</code> ä¹‹é—´çš„ç«¯å£ä¸ 6 ä¸ª Redis å®¹å™¨æ˜ å°„ï¼Œå¹¶å°†å®¿ä¸»æœºçš„ç›®å½•ä¸å®¹å™¨å†…çš„ç›®å½•è¿›è¡Œæ˜ å°„ï¼ˆç›®å½•æŒ‚è½½ï¼‰ã€‚è®°å¾—æŒ‡å®šç½‘ç»œæ¨¡å¼ï¼Œä½¿ç”¨ <code>host</code> ç½‘ç»œæ¨¡å¼ã€‚</p> <p>åœ¨ <code>192.168.10.10</code> æœºå™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token for-or-select variable">port</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">seq</span> <span class="token number">6371</span> <span class="token number">6373</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token punctuation">\</span>
  <span class="token function">docker</span> run -di --restart always --name redis-<span class="token variable">${port}</span> --net <span class="token function">host</span> <span class="token punctuation">\</span>
  -v /usr/local/docker-redis/redis-cluster/<span class="token variable">${port}</span>/conf/redis.conf:/usr/local/etc/redis/redis.conf <span class="token punctuation">\</span>
  -v /usr/local/docker-redis/redis-cluster/<span class="token variable">${port}</span>/data:/data <span class="token punctuation">\</span>
  redis redis-server /usr/local/etc/redis/redis.conf<span class="token punctuation">;</span> <span class="token punctuation">\</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>åœ¨ <code>192.168.10.11</code> æœºå™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token for-or-select variable">port</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">seq</span> <span class="token number">6374</span> <span class="token number">6376</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token punctuation">\</span>
  <span class="token function">docker</span> run -di --restart always --name redis-<span class="token variable">${port}</span> --net <span class="token function">host</span> <span class="token punctuation">\</span>
  -v /usr/local/docker-redis/redis-cluster/<span class="token variable">${port}</span>/conf/redis.conf:/usr/local/etc/redis/redis.conf <span class="token punctuation">\</span>
  -v /usr/local/docker-redis/redis-cluster/<span class="token variable">${port}</span>/data:/data <span class="token punctuation">\</span>
  redis redis-server /usr/local/etc/redis/redis.conf<span class="token punctuation">;</span> <span class="token punctuation">\</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>åœ¨ <code>192.168.10.10</code> æœºå™¨æ‰§è¡Œ <code>docker ps -n 3</code> æŸ¥çœ‹å®¹å™¨æ˜¯å¦åˆ›å»ºæˆåŠŸã€‚</p> <p><img src="https://static001.geekbang.org/infoq/76/76da732ac4cb08792c74c0465bc094c4.png" alt="img"></p> <p>åœ¨ <code>192.168.10.11</code> æœºå™¨æ‰§è¡Œ <code>docker ps -n 3</code> æŸ¥çœ‹å®¹å™¨æ˜¯å¦åˆ›å»ºæˆåŠŸã€‚</p> <p><img src="https://static001.geekbang.org/infoq/db/dbb04889b514ffd1f0c542e316fb1899.png" alt="img"></p> <h3 id="åˆ›å»º-redis-cluster-é›†ç¾¤"><a href="#åˆ›å»º-redis-cluster-é›†ç¾¤" class="header-anchor">#</a> åˆ›å»º Redis Cluster é›†ç¾¤</h3> <p>éšä¾¿è¿›å…¥ä¸€ä¸ªå®¹å™¨èŠ‚ç‚¹ï¼Œå¹¶è¿›å…¥ <code>/usr/local/bin/</code> ç›®å½•ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># è¿›å…¥å®¹å™¨</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it redis-6371 <span class="token function">bash</span>
<span class="token comment"># åˆ‡æ¢è‡³æŒ‡å®šç›®å½•</span>
<span class="token builtin class-name">cd</span> /usr/local/bin/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®ç° Redis Cluster é›†ç¾¤çš„åˆ›å»ºã€‚</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>redis-cli -a <span class="token number">1234</span> --cluster create <span class="token number">192.168</span>.10.10:6371 <span class="token number">192.168</span>.10.10:6372 <span class="token number">192.168</span>.10.10:6373 <span class="token number">192.168</span>.10.11:6374 <span class="token number">192.168</span>.10.11:6375 <span class="token number">192.168</span>.10.11:6376 --cluster-replicas <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å‡ºç°é€‰æ‹©æç¤ºä¿¡æ¯ï¼Œè¾“å…¥ <strong>yes</strong>ï¼Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p> <p><img src="https://static001.geekbang.org/infoq/c7/c7cf58473d1ecea9f5b925b9de5a38f6.png" alt="img"></p> <p>é›†ç¾¤åˆ›å»ºæˆåŠŸå¦‚ä¸‹ï¼š</p> <p><img src="https://static001.geekbang.org/infoq/dc/dcc8671ab41d1647d62ff288db56581b.png" alt="img"></p> <p>ä»¥ä¸‹å†…å®¹æ˜¯åˆ›å»ºé›†ç¾¤æ—¶è¿”å›çš„è¯¦ç»†ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯ä¸Šä¸¤å¹…å›¾ä¸­çš„æ‰€æœ‰å†…å®¹ã€‚</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>root@localhost:/usr/local/bin<span class="token comment"># redis-cli -a 1234 --cluster create 192.168.10.10:6371 192.168.10.10:6372 192.168.10.10:6373 192.168.10.11:6374 192.168.10.11:6375 192.168.10.11:6376 --cluster-replicas 1</span>
Warning: Using a password with <span class="token string">'-a'</span> or <span class="token string">'-u'</span> option on the <span class="token builtin class-name">command</span> line interface may not be safe.
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Performing <span class="token builtin class-name">hash</span> slots allocation on <span class="token number">6</span> nodes<span class="token punctuation">..</span>.
Master<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> -<span class="token operator">&gt;</span> Slots <span class="token number">0</span> - <span class="token number">5460</span>
Master<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> -<span class="token operator">&gt;</span> Slots <span class="token number">5461</span> - <span class="token number">10922</span>
Master<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> -<span class="token operator">&gt;</span> Slots <span class="token number">10923</span> - <span class="token number">16383</span>
Adding replica <span class="token number">192.168</span>.10.11:6376 to <span class="token number">192.168</span>.10.10:6371
Adding replica <span class="token number">192.168</span>.10.10:6373 to <span class="token number">192.168</span>.10.11:6374
Adding replica <span class="token number">192.168</span>.10.11:6375 to <span class="token number">192.168</span>.10.10:6372
M: 299cf79ddafc83dced27f628f1f82dac483fbc4e <span class="token number">192.168</span>.10.10:6371
   slots:<span class="token punctuation">[</span><span class="token number">0</span>-5460<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5461</span> slots<span class="token punctuation">)</span> master
M: ac805b90b6e20e26dc4268454bb2855beea6cc19 <span class="token number">192.168</span>.10.10:6372
   slots:<span class="token punctuation">[</span><span class="token number">10923</span>-16383<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5461</span> slots<span class="token punctuation">)</span> master
S: db35494fcc5db0c88d27da7885c817e6cdcc9373 <span class="token number">192.168</span>.10.10:6373
   replicates 7013270480d37eeab79b9cd0272e934d4548136a
M: 7013270480d37eeab79b9cd0272e934d4548136a <span class="token number">192.168</span>.10.11:6374
   slots:<span class="token punctuation">[</span><span class="token number">5461</span>-10922<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5462</span> slots<span class="token punctuation">)</span> master
S: 8435e1b0d51f2690c5f94f9a5682a4ac34e94326 <span class="token number">192.168</span>.10.11:6375
   replicates ac805b90b6e20e26dc4268454bb2855beea6cc19
S: 7b13c16fa6fe8e13cdc0b4846b87edffed55c62e <span class="token number">192.168</span>.10.11:6376
   replicates 299cf79ddafc83dced27f628f1f82dac483fbc4e
Can I <span class="token builtin class-name">set</span> the above configuration? <span class="token punctuation">(</span>type <span class="token string">'yes'</span> to accept<span class="token punctuation">)</span>: <span class="token function">yes</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Nodes configuration updated
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Assign a different config epoch to each <span class="token function">node</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Sending CLUSTER MEET messages to <span class="token function">join</span> the cluster
Waiting <span class="token keyword">for</span> the cluster to <span class="token function">join</span>
<span class="token builtin class-name">.</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Performing Cluster Check <span class="token punctuation">(</span>using <span class="token function">node</span> <span class="token number">192.168</span>.10.10:6371<span class="token punctuation">)</span>
M: 299cf79ddafc83dced27f628f1f82dac483fbc4e <span class="token number">192.168</span>.10.10:6371
   slots:<span class="token punctuation">[</span><span class="token number">0</span>-5460<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5461</span> slots<span class="token punctuation">)</span> master
   <span class="token number">1</span> additional replica<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
S: 8435e1b0d51f2690c5f94f9a5682a4ac34e94326 <span class="token number">192.168</span>.10.11:6375
   slots: <span class="token punctuation">(</span><span class="token number">0</span> slots<span class="token punctuation">)</span> slave
   replicates ac805b90b6e20e26dc4268454bb2855beea6cc19
S: db35494fcc5db0c88d27da7885c817e6cdcc9373 <span class="token number">192.168</span>.10.10:6373
   slots: <span class="token punctuation">(</span><span class="token number">0</span> slots<span class="token punctuation">)</span> slave
   replicates 7013270480d37eeab79b9cd0272e934d4548136a
S: 7b13c16fa6fe8e13cdc0b4846b87edffed55c62e <span class="token number">192.168</span>.10.11:6376
   slots: <span class="token punctuation">(</span><span class="token number">0</span> slots<span class="token punctuation">)</span> slave
   replicates 299cf79ddafc83dced27f628f1f82dac483fbc4e
M: 7013270480d37eeab79b9cd0272e934d4548136a <span class="token number">192.168</span>.10.11:6374
   slots:<span class="token punctuation">[</span><span class="token number">5461</span>-10922<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5462</span> slots<span class="token punctuation">)</span> master
   <span class="token number">1</span> additional replica<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
M: ac805b90b6e20e26dc4268454bb2855beea6cc19 <span class="token number">192.168</span>.10.10:6372
   slots:<span class="token punctuation">[</span><span class="token number">10923</span>-16383<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token number">5461</span> slots<span class="token punctuation">)</span> master
   <span class="token number">1</span> additional replica<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token punctuation">[</span>OK<span class="token punctuation">]</span> All nodes agree about slots configuration.
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Check <span class="token keyword">for</span> <span class="token function">open</span> slots<span class="token punctuation">..</span>.
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Check slots coverage<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>OK<span class="token punctuation">]</span> All <span class="token number">16384</span> slots covered.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><p>è‡³æ­¤ä¸€ä¸ªé«˜å¯ç”¨çš„ Redis Cluster é›†ç¾¤æ­å»ºå®Œæˆï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¯¥é›†ç¾¤ä¸­åŒ…å« 6 ä¸ª Redis èŠ‚ç‚¹ï¼Œ3 ä¸» 3 ä»ã€‚ä¸‰ä¸ªä¸»èŠ‚ç‚¹ä¼šåˆ†é…æ§½ï¼Œå¤„ç†å®¢æˆ·ç«¯çš„å‘½ä»¤è¯·æ±‚ï¼Œè€Œä»èŠ‚ç‚¹å¯ç”¨åœ¨ä¸»èŠ‚ç‚¹æ•…éšœåï¼Œé¡¶æ›¿ä¸»èŠ‚ç‚¹ã€‚</p> <p><img src="https://static001.geekbang.org/infoq/27/27ad2d63da3a5939ff37f79c0baa3f49.png" alt="img"></p> <h2 id="æŸ¥çœ‹é›†ç¾¤çŠ¶æ€"><a href="#æŸ¥çœ‹é›†ç¾¤çŠ¶æ€" class="header-anchor">#</a> æŸ¥çœ‹é›†ç¾¤çŠ¶æ€</h2> <p>æˆ‘ä»¬å…ˆè¿›å…¥å®¹å™¨ï¼Œç„¶åé€šè¿‡ä¸€äº›é›†ç¾¤å¸¸ç”¨çš„å‘½ä»¤æŸ¥çœ‹ä¸€ä¸‹é›†ç¾¤çš„çŠ¶æ€ã€‚</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># è¿›å…¥å®¹å™¨</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it redis-6371 <span class="token function">bash</span>
<span class="token comment"># åˆ‡æ¢è‡³æŒ‡å®šç›®å½•</span>
<span class="token builtin class-name">cd</span> /usr/local/bin/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="æ£€æŸ¥é›†ç¾¤çŠ¶æ€"><a href="#æ£€æŸ¥é›†ç¾¤çŠ¶æ€" class="header-anchor">#</a> æ£€æŸ¥é›†ç¾¤çŠ¶æ€</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>redis-cli -a <span class="token number">1234</span> --cluster check <span class="token number">192.168</span>.10.11:6375
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://static001.geekbang.org/infoq/38/380c3a75203f3be959ca0dc97bdb9af6.png" alt="img"></p> <h3 id="æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯å’ŒèŠ‚ç‚¹ä¿¡æ¯"><a href="#æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯å’ŒèŠ‚ç‚¹ä¿¡æ¯" class="header-anchor">#</a> æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯å’ŒèŠ‚ç‚¹ä¿¡æ¯</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># è¿æ¥è‡³é›†ç¾¤æŸä¸ªèŠ‚ç‚¹</span>
redis-cli -c -a <span class="token number">1234</span> -h <span class="token number">192.168</span>.10.11 -p <span class="token number">6376</span>
<span class="token comment"># æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯</span>
cluster info
<span class="token comment"># æŸ¥çœ‹é›†ç¾¤ç»“ç‚¹ä¿¡æ¯</span>
cluster nodes
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="https://static001.geekbang.org/infoq/b9/b9446bb132c290dd0914002e945918c7.png" alt="img"></p> <h3 id="set-get"><a href="#set-get" class="header-anchor">#</a> SET/GET</h3> <p>åœ¨ 6371 èŠ‚ç‚¹ä¸­æ‰§è¡Œå†™å…¥å’Œè¯»å–ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># è¿›å…¥å®¹å™¨å¹¶è¿æ¥è‡³é›†ç¾¤æŸä¸ªèŠ‚ç‚¹</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it redis-6371 /usr/local/bin/redis-cli -c -a <span class="token number">1234</span> -h <span class="token number">192.168</span>.10.10 -p <span class="token number">6371</span>
<span class="token comment"># å†™å…¥æ•°æ®</span>
<span class="token builtin class-name">set</span> name mrhelloworld
<span class="token builtin class-name">set</span> aaa <span class="token number">111</span>
<span class="token builtin class-name">set</span> bbb <span class="token number">222</span>
<span class="token comment"># è¯»å–æ•°æ®</span>
get name
get aaa
get bbb
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img src="https://static001.geekbang.org/infoq/22/22fcd3fcaf114acdf4088a37f52d4739.png" alt="img"></p> <p>åˆ«ç€æ€¥ï¼Œè®©æˆ‘æ¥è§£é‡Šä¸€ä¸‹ä¸Šå›¾ä¸­çš„æ“ä½œè¿‡ç¨‹ï¼š</p> <ul><li><p>é¦–å…ˆè¿›å…¥å®¹å™¨å¹¶è¿æ¥è‡³é›†ç¾¤æŸä¸ªèŠ‚ç‚¹ï¼›</p></li> <li><p>ç„¶åæ‰§è¡Œ<strong>ç¬¬ä¸€ä¸ª</strong> set å‘½ä»¤ <code>set name mrhelloworld</code>ï¼Œ<code>name</code> é”®æ ¹æ®å“ˆå¸Œå‡½æ•°è¿ç®—ä»¥åå¾—åˆ°çš„å€¼ä¸º <code>[5798]</code>ã€‚å½“å‰é›†ç¾¤ç¯å¢ƒçš„æ§½åˆ†é…æƒ…å†µä¸ºï¼š<code>[0-5460] 6371 èŠ‚ç‚¹</code>ï¼Œ<code>[5461-10922] 6374 èŠ‚ç‚¹</code>ï¼Œ<code>[10923-16383] 6372 èŠ‚ç‚¹</code>ï¼Œæ‰€ä»¥è¯¥é”®çš„å­˜å‚¨å°±è¢«åˆ†é…åˆ°äº† <strong>6374</strong> èŠ‚ç‚¹ä¸Šï¼›</p></li> <li><p>å†æ¥çœ‹<strong>ç¬¬äºŒä¸ª</strong> set å‘½ä»¤ <code>set aaa</code>ï¼Œè¿™é‡Œå¤§å®¶å¯èƒ½ä¼šæœ‰ä¸€äº›ç–‘é—®ï¼Œä¸ºä»€ä¹ˆçœ‹ä¸åˆ° <code>aaa</code> é”®æ ¹æ®å“ˆå¸Œå‡½æ•°è¿ç®—ä»¥åå¾—åˆ°çš„å€¼ï¼Ÿå› ä¸ºåˆšæ‰é‡å®šå‘è‡³ <strong>6374</strong> èŠ‚ç‚¹æ’å…¥äº†æ•°æ®ï¼Œæ­¤æ—¶å¦‚æœè¿˜æœ‰æ•°æ®æ’å…¥ï¼Œæ­£å¥½é”®æ ¹æ®å“ˆå¸Œå‡½æ•°è¿ç®—ä»¥åå¾—åˆ°çš„å€¼ä¹Ÿè¿˜åœ¨è¯¥èŠ‚ç‚¹çš„èŒƒå›´å†…ï¼Œé‚£ä¹ˆç›´æ¥æ’å…¥æ•°æ®å³å¯ï¼›</p></li> <li><p>æ¥ç€æ˜¯<strong>ç¬¬ä¸‰ä¸ª</strong> set å‘½ä»¤ <code>set bbb</code>ï¼Œ<code>bbb</code> é”®æ ¹æ®å“ˆå¸Œå‡½æ•°è¿ç®—ä»¥åå¾—åˆ°çš„å€¼ä¸º <code>[5287]</code>ï¼Œæ‰€ä»¥è¯¥é”®çš„å­˜å‚¨å°±è¢«åˆ†é…åˆ°äº† <strong>6371</strong> èŠ‚ç‚¹ä¸Šï¼›</p></li> <li><p>ç„¶åæ˜¯è¯»å–æ“ä½œï¼Œ<strong>ç¬¬å››ä¸ª</strong>å‘½ä»¤ <code>get name</code>ï¼Œ<code>name</code> é”®æ ¹æ®å“ˆå¸Œå‡½æ•°è¿ç®—ä»¥åå¾—åˆ°çš„å€¼ä¸º <code>[5798]</code>ï¼Œè¢«é‡å®šå‘è‡³ <strong>6374</strong> èŠ‚ç‚¹è¯»å–ï¼›</p></li> <li><p><strong>ç¬¬äº”ä¸ª</strong>å‘½ä»¤ <code>get aaa</code>ï¼Œ<code>aaa</code> é”®æ ¹æ®å“ˆå¸Œå‡½æ•°è¿ç®—ä»¥åå¾—åˆ°çš„å€¼ä¹Ÿåœ¨ <strong>6374</strong> èŠ‚ç‚¹ï¼Œç›´æ¥è¯»å–ï¼›</p></li> <li><p><strong>ç¬¬å…­ä¸ª</strong>å‘½ä»¤ <code>get bbb</code>ï¼Œ<code>bbb</code> é”®æ ¹æ®å“ˆå¸Œå‡½æ•°è¿ç®—ä»¥åå¾—åˆ°çš„å€¼ä¸º <code>[5287]</code>ï¼Œè¢«é‡å®šå‘è‡³ <strong>6371</strong> èŠ‚ç‚¹è¯»å–ã€‚</p></li></ul> <p>é€šè¿‡ä»¥ä¸Šæ“ä½œæˆ‘ä»¬å¾—çŸ¥ <code>name</code> é”®çš„å­˜å‚¨è¢«åˆ†é…åˆ°äº† 6374 èŠ‚ç‚¹ï¼Œå¦‚æœç›´æ¥è¿æ¥ 6374 èŠ‚ç‚¹å¹¶è·å–è¯¥å€¼ä¼šæ€ä¹ˆæ ·ï¼Ÿæ²¡é”™ï¼Œä¸éœ€è¦é‡å®šå‘èŠ‚ç‚¹ï¼Œå› ä¸ºæ•°æ®å°±åœ¨è¯¥èŠ‚ç‚¹ï¼Œæ‰€ä»¥ç›´æ¥è¯»å–è¿”å›ã€‚</p> <p><img src="https://static001.geekbang.org/infoq/2e/2e60fc44016d5c31017c54bb8449b711.png" alt="img"></p> <h2 id="å®¢æˆ·ç«¯è¿æ¥"><a href="#å®¢æˆ·ç«¯è¿æ¥" class="header-anchor">#</a> å®¢æˆ·ç«¯è¿æ¥</h2> <p>æœ€åæ¥ä¸€æ³¢å®¢æˆ·ç«¯è¿æ¥æ“ä½œï¼Œéšä¾¿å“ªä¸ªèŠ‚ç‚¹ï¼Œçœ‹çœ‹å¯å¦é€šè¿‡å¤–éƒ¨è®¿é—® Redis Cluster é›†ç¾¤ã€‚</p> <p><img src="https://static001.geekbang.org/infoq/c4/c428ca8697221393de63bd3beb228b14.png" alt="img"></p> <p><img src="https://static001.geekbang.org/infoq/8e/8e61f525269508e86a873c5bedc45f07.png" alt="img"></p> <p>è‡³æ­¤ä½¿ç”¨å¤šæœºç¯å¢ƒå¤šä¸ªå®¹å™¨æ­å»º Redis Cluster é›†ç¾¤ç¯å¢ƒå°±åˆ°è¿™é‡Œï¼Œå…¶å®æ•´ä½“æ­å»ºè¿‡ç¨‹ä¸ç®—ç‰¹åˆ«éº»çƒ¦ï¼Œå› ä¸ºï¼š</p> <ul><li><p>åˆ›å»º Redis é›†ç¾¤éœ€è¦ç”¨åˆ° Rubyï¼Œå¦åˆ™å°±å¾—è‡ªå·±å…³è”èŠ‚ç‚¹æ„å»ºé›†ç¾¤ï¼Œè‡ªå·±åˆ†é…æ§½ï¼›</p></li> <li><p>å¦‚æœä½¿ç”¨ Ruby æ„å»º Redis é›†ç¾¤ï¼Œå°±éœ€è¦å®‰è£… Ruby ç¯å¢ƒï¼›</p></li> <li><p>è€Œ Redis ä» 5 ç‰ˆæœ¬å¼€å§‹å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>redis-cli</code> å‘½ä»¤åˆ›å»ºé›†ç¾¤äº†ï¼Œå°±çœå»äº†å¾ˆå¤šéº»çƒ¦äº‹ï¼›</p></li> <li><p>æˆ‘ä»¬è¿˜ä½¿ç”¨äº† shell for å¾ªç¯è¯­å¥ç®€åŒ–äº†æ„å»ºè¿‡ç¨‹ï¼Œå¦åˆ™é‚£äº›è¯­å¥ä¸€æ¡æ¡æ‰§è¡Œä¹Ÿå¤Ÿä½ é—¹å¿ƒçš„ã€‚</p></li></ul> <p>ç»¼ä¸Šæ‰€è¿°ï¼Œæœ‰æ²¡æœ‰æ›´ç®€å•çš„åŠæ³•å‘¢ï¼Ÿå½“ç„¶æœ‰äº†ï¼Œä¸ç„¶æˆ‘åœ¨è¿™è·Ÿä½ å–ä»€ä¹ˆå…³å­ã€‚</p> <p><img src="https://static001.geekbang.org/infoq/0a/0a75c5102479dbd2d534fdcdbba0f41d.jpeg?x-oss-process=image/resize,p_80/auto-orient,1" alt="img"></p> <p>Docker Compose å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚åé¢æˆ‘ä»¬å…ˆå­¦ä¹ ä¸€ä¸‹ä»€ä¹ˆæ˜¯ Docker Composeï¼Œç„¶åä½¿ç”¨ Docker Compose å†æ¥æ­å»ºä¸€é Redis Cluster é›†ç¾¤ç¯å¢ƒï¼Œæ„Ÿå—æ„Ÿå—è¿™å‰åçš„åŒºåˆ«ã€‚</p> <p>[]: https://xie.infoq.cn/article/a5536b928edd12beb32fcabf9</p></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/xugaoyi/vuepress-theme-vdoing/edit/master/docs/25.è¿ç»´/50.Docker/05.Docker æ­å»º Redis Cluster é›†ç¾¤.md" target="_blank" rel="noopener noreferrer">ç¼–è¾‘</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2022/02/04, 14:50:54</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/8a7664/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Docker ç½‘ç»œæ¨¡å¼å’Œå®¹å™¨é—´é€šä¿¡</div></a> <a href="/pages/1b1528/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Redisé«˜çº§å®¢æˆ·ç«¯Lettuceè¯¦è§£</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/pages/8a7664/" class="prev">Docker ç½‘ç»œæ¨¡å¼å’Œå®¹å™¨é—´é€šä¿¡</a></span> <span class="next"><a href="/pages/1b1528/">Redisé«˜çº§å®¢æˆ·ç«¯Lettuceè¯¦è§£</a>â†’
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">æœ€è¿‘æ›´æ–°</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/075df8/"><div>
            Redisé«˜çº§å®¢æˆ·ç«¯Lettuceè¯¦è§£
            <!----></div></a> <span class="date">02-04</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/d09904/"><div>
            å¸ƒéš†è¿‡æ»¤å™¨
            <!----></div></a> <span class="date">02-03</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/8a3d2e/"><div>
            Redisé«˜çº§å®¢æˆ·ç«¯Lettuceè¯¦è§£
            <!----></div></a> <span class="date">02-03</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">æ›´å¤šæ–‡ç« &gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:894072666@qq.com" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/xugaoyi" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="å¬éŸ³ä¹" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2019-2022
    <span>Evan Xu | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.e647757e.js" defer></script><script src="/assets/js/2.37ecbe42.js" defer></script><script src="/assets/js/74.6d9cec5f.js" defer></script>
  </body>
</html>
